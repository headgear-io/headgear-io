<html>
<head>
<!-- Import the model viewer component -->
<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="docSlider.css">
	  <link href="https://vjs.zencdn.net/7.17.0/video-js.css" rel="stylesheet" />
    <style>
        /*
		section:nth-child(odd){
            background-color: #eee;
        }
		*/
        .inner{
            height: 100%;
            display: flex;

            font-weight: bold;
            font-size: 2em;
			color: orange;
        }
		
		.docSlider-pager {
			display: none !important;
		}
		/* down arrow */
		.Top .scrollDownAniContainer, .Start .scrollDownAniContainer {
		  position: absolute;
		  width: 24px;
		  height: 24px;
		  margin: 0 auto;
		  bottom: 13vmin;
		  left: 50%;
		}

		.Top .chevron, .Start .chevron {
		  position: absolute;
		  width: 28px;
		  height: 8px;
		  opacity: 0;
		  transform: scale3d(0.5, 0.5, 0.5);
		  animation: move 3s ease-out infinite;
		}

		.Top .chevron:first-child, .Start .chevron:first-child {
		  animation: move 3s ease-out 1s infinite;
		}

		.Top .chevron:nth-child(2), .Start .chevron:nth-child(2) {
		  animation: move 3s ease-out 2s infinite;
		}

		.Top .chevron:before,
		.Top .chevron:after, .Start .chevron:before,
		.Start .chevron:after {
		  content: ' ';
		  position: absolute;
		  top: 0;
		  height: 100%;
		  width: 51%;
		  background: #fff;
		}

		.Top .chevron:before, .Start .chevron:before {
		  left: 0;
		  transform: skew(0deg, 30deg);
		}

		.Top .chevron:after, .Start .chevron:after {
		  right: 0;
		  width: 50%;
		  transform: skew(0deg, -30deg);
		}

		@keyframes move {
		  25% {
			opacity: 1;
		  }
		  33% {
			opacity: 1;
			transform: translateY(30px);
		  }
		  67% {
			opacity: 1;
			transform: translateY(40px);
		  }
		  100% {
			opacity: 0;
			transform: translateY(55px) scale3d(0.5, 0.5, 0.5);
		  }
		}
		
		<!--         
		justify-content: center;
            align-items: center;
			-->
		
    </style>
<style>

body {
  background-color: #000000;
    overflow-y: hidden; /* Hide vertical scrollbar */
  overflow-x: hidden; /* Hide horizontal scrollbar */
}
#revealContainer {

}
#loadingScreen {
	position: absolute;
	top: 0px;
	left: 0px;
	bottom: 0px;
	right: 0px;
	width: 100%;
	height: 100%;
 z-index: 101;
 background-color: black;
}

#modelviewer {
	width: 100%;
	height: 100%;
	background-color: unset;
	/* display:none; */
}

model-viewer {
    --poster-color: transparent;
}

#modelviewerContainer {
    width: 100%;
    height: 80%;
    position: absolute;
}

#page3 {
    display: flex;
    width: 100%;
    height: 100%;
}

#page3btn {
pointer-events: auto;
cursor: pointer;
position:absolute;
	bottom: 20px;
	left: 30px;
	color: red;
	font-size: 10vmin;
	height: 15vmin;
	z-index: 100;
	
}
#revealbtn {
	pointer-events: auto;
	cursor: pointer;
	position:absolute;
	bottom: 15vmin;
	text-align: center;
	color: red;
	font-size: 10vmin;
	height: 15vmin;
	z-index: 100;
    margin-left: -15vw;
    left: 50%;
}
#loadingscreenBtn {
	pointer-events: auto;
	cursor: pointer;
	position:absolute;
	bottom: 5vmin;
	text-align: center;
	color: red;
	font-size: 10vmin;
	height: 15vmin;
	z-index: 100;
    margin-left: -15vw;
    left: 50%;
}
#exitARBtn {
	background-color: white; 
	border-radius: 4px; 
	border: none; 
	position: absolute; 
	top: 25px; 
	right: 16px;
}
#page3UI {
pointer-events: none;
	position: absolute;
	    display: flex;
    width: 100%;
    height: 100%;
}

  #bottleParent {
    width: 100%;
	height: 80%
	text-align: center;

  }
</style>

<script src="https://unpkg.com/interactjs/dist/interact.min.js"></script>

<style>

.resize-drag {
  width: 120px;
  border-radius: 8px;
  padding: 20px;
  margin: 1rem;
  background-color: #29e;
  color: white;
  font-size: 20px;
  font-family: sans-serif;
background-image:url('bottle_with_label.jpg');
  touch-action: none;

  /* This makes things *much* easier */
  box-sizing: border-box;
  
}
#resize-handle {
  position: absolute;
  
  width: 40px;
  height: 40px;
  
  background-color: #92e;
  border: solid 4px #fff;
  border-radius: 100%;

}
<!--
#line {
position: absolute;  
  -webkit-transform: translate(200px, 200px);
  transform: translate(200px, 200px);
  left: -35px;
  top: -35px;

bottom: 0;
}
-->
</style>
<style>
html, body {

  width: 100%;
  height: 100%;
  overflow: hidden;

}

.particle-count {
  display: block;
  text-align: center;
  margin: 25px 0;
}

.particles > .particle {
  border-radius: 100%;
  background: transparent;
  position: absolute;
  background-size: 100% 100%;
  background-repeat: no-repeat;
}
.particles > .particle.smaller {
  width: 5px;
  height: 5px;
}
.particles > .particle.small {
  width: 10px;
  height: 10px;
}
.particles > .particle.normal {
  width: 15px;
  height: 15px;
}
.particles > .particle.big {
  width: 20px;
  height: 20px;
}
.particles > .particle.bigger {
  width: 25px;
  height: 25px;
}
</style>

</head>
<body>
<!--
<div id="loadingScreen">
	<div id="loadingscreenBtn" onclick="closeLoadingScreen()">
		START
	</div>
</div>
-->
<div class="docSlider">
    <section class="Top">
        <div class="inner">
			<div id="bottleParent">
				<div style="background-image:url('bottle_no_label.jpg'); background-repeat:no-repeat; 	background-size: cover; position: absolute; bottom: 0; top: 0;">
					<div class="resize-drag">
						<div id="resize-handle" data-bottom="true" >DRAG ME</div>
					</div>
				</div> 
			</div>
			<div id="page1">
			 
			<div id="revealContainer">
				<div id="revealbtn" onclick="revealProduct()">
					Reveal
				</div>
			</div>
			<div id="scrollDownAniContainer" class="scrollDownAniContainer" style="display:none;">
                    <div class="chevron"></div>
                    <div class="chevron"></div>
                    <div class="chevron"></div>
                </div>
		</div>
		</div>
    </section>
    <section class="Top">
        <div class="inner">Page2
			<div id="page2">
					<div id="scrollDownAniContainer2" class="scrollDownAniContainer" style="display:none;" >
                    <div class="chevron"></div>
                    <div class="chevron"></div>
                    <div class="chevron"></div>
					</div>
			</div>
		</div>
    </section>
    <section>
        <div class="inner">
			<div id="page3">
				<div id="page3UI">
					<div id="page3btn" onclick="console.log('pressed')">
						Download 1
					</div>
				</div>
				<div id="modelviewerContainer">
					<model-viewer id="modelviewer" src="models/tube_mfx.glb" ar ar-scale="fixed" loading="eager" camera-controls alt="Max Factor 3D Model Viewer" exposure="0.5" ios-src="models/tube_mfx.usdz">
					  <button slot="ar-button" style="background-color: white; border-radius: 4px; border: none; position: absolute; top: 16px; right: 16px; ">
							View in AR
						</button>
						<button id="exitARBtn" slot="exit-webxr-ar-button" onclick="hideAR()">
						  ?? Close AR
					  </button>
					</model-viewer>
				</div>
				
			</div>
		</div>
    </section>

</div>
<div class='particles'></div>
<script>
	var productViewer = document.getElementById('modelviewer'); 
	
	function startAR() {
		//productViewer.style.display = 'block'; 
		productViewer.activateAR();
	}
	
	function hideAR() {
		//productViewer.style.display = 'none'; 
	}
</script>
  	
<script src="docSlider.min.js"></script>
<script>
	var width = window.innerWidth;
	var height = window.innerHeight;
	
	docSlider.init();
	//show animated scroll down icon
	var scrollDownAniContainer =  document.getElementsByClassName('scrollDownAniContainer'); 
	for (let i = 0; i < scrollDownAniContainer.length; i++) {
		scrollDownAniContainer[i].style.display = "block";
	}
	

	
	function triggerPlay() {
		var myPlayer = videojs('my-video');
		myPlayer.play()
	}
		var doOnce = true;
		function revealProduct() {
			if (doOnce) {
				doOnce = false;
				var revealBtnVar = document.getElementById('revealContainer'); 
				revealBtnVar.style.display = 'none'; 
				
				//var vidParent = document.getElementById('vidParent')
				//vidParent.style.display = 'block'; 
				//play video
				var myPlayer = videojs('my-video');
				myPlayer.play()
		
				docSlider.init();
				//show animated scroll down icon
				var scrollDownAniContainer =  document.getElementsByClassName('scrollDownAniContainer'); 
				for (let i = 0; i < scrollDownAniContainer.length; i++) {
					scrollDownAniContainer[i].style.display = "block";
				}
			}
		}
	function closeLoadingScreen() {
		var loadingScreen = document.getElementById('loadingScreen'); 
		loadingScreen.style.display = 'none'; 
		//docSlider.init();
	}
	
</script>
<script>

var width = window.innerWidth;
var height = window.innerHeight * 0.75; //to fix
	var revealDrag = false;
	
interact('.resize-drag')
  .resizable({
  
   onstart: function (event) {docSlider.enable(false); revealDrag = true;},
  //onmove : function (event) {},
  onend  : function (event) {docSlider.enable(true); revealDrag = false;},
  
    // resize from all edges and corners
    edges: { left: false, right: false, bottom: true, top: false },

    listeners: {
      move (event) {
        var target = event.target
        var x = (parseFloat(target.getAttribute('data-x')) || 0)
        var y = (parseFloat(target.getAttribute('data-y')) || 0)

        // update the element's style
        target.style.width = event.rect.width + 'px'
        target.style.height = event.rect.height + 'px'

        // translate when resizing from top or left edges
        x += event.deltaRect.left
        y += event.deltaRect.top

        target.style.transform = 'translate(' + x + 'px,' + y + 'px)'

        target.setAttribute('data-x', x)
        target.setAttribute('data-y', y)
        //target.textContent = Math.round(event.rect.width) + '\u00D7' + Math.round(event.rect.height)
		
		moveHandler(event, document.getElementById('resize-handle'));
      },
	  

    },
	
    modifiers: [
      // keep the edges inside the parent
      interact.modifiers.restrictEdges({
        outer: 'parent'
      }),

      // minimum size
	  
      interact.modifiers.restrictSize({
        min: { width: width, height: 50 },
		max: { width: width, height: height }
      })
    ],

    inertia: true
  })
  .draggable({
    listeners: { 
		move: window.dragMoveListener,	
	},
    inertia: true,
    modifiers: [
      interact.modifiers.restrictRect({
        restriction: 'parent',
        endOnly: true
      })
    ]
  })
  function moveHandler (event, handlerElement) {
    var target = handlerElement,
        // keep the dragged position in the data-x/data-y attributes
        x = 0, //(parseFloat(target.getAttribute('data-x')) || 0) + event.dx,
        y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;

    // translate the element
    target.style.webkitTransform =
    //target.style.transform = 'translate(' + event.rect.right + 'px, ' + event.rect.bottom + 'px)';
	target.style.transform = 'translate(0px, ' + y + 'px)';

    // update the position attributes
    target.setAttribute('data-x', x);
    target.setAttribute('data-y', y);
  }
  </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
      <script id='rendered-js' >
var d = document,$d = $(d),
w = window,$w = $(w),
wWidth = $w.width(),wHeight = $w.height(),
credit = $('.credit > a'),
particles = $('.particles'),
particleCount = 0,
sizes = [
15, 20, 25, 35, 45],

colors = [
'#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5',
'#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4CAF50',
'#8BC34A', '#CDDC39', '#FFEB3B', '#FFC107', '#FF9800',
'#FF5722', '#795548', '#9E9E9E', '#607D8B', '#777777'],


mouseX = $w.width() / 2,mouseY = $w.height() / 2;



$w.
on('resize', function () {
  wWidth = $w.width();
  wHeight = $w.height();
});

$d.
on('mousemove touchmove', function (event) {
  event.preventDefault();
  event.stopPropagation();
  mouseX = event.clientX;
  mouseY = event.clientY;
  if (!!event.originalEvent.touches) {
    mouseX = event.originalEvent.touches[0].clientX;
    mouseY = event.originalEvent.touches[0].clientY;
  }
}).
on('mousedown touchstart', function (event) {

  if (event.target === credit.get(0)) {
    return;
  }
  mouseX = event.clientX;
  mouseY = event.clientY;
  if (!!event.originalEvent.touches) {
    mouseX = event.originalEvent.touches[0].clientX;
    mouseY = event.originalEvent.touches[0].clientY;
  }

  var timer = setInterval(function () {
  if (revealDrag && particleCount < 20) {
	$d.
    one('mouseup mouseleave touchend touchcancel touchleave', function () {
      clearInterval(timer);
    });
    createParticle(event);
	}
  }, 1000 / 60);

});


function createParticle(event) {
  var particle = $('<div class="particle"/>'),
  size = sizes[Math.floor(Math.random() * sizes.length)],
  color = colors[Math.floor(Math.random() * colors.length)],
  negative = size / 2,
  speedHorz = Math.random() * 10,
  speedUp = Math.random() * 25,
  spinVal = 360 * Math.random(),
  spinSpeed = 36 * Math.random() * (Math.random() <= .5 ? -1 : 1),
  otime,
  time = otime = (1 + .5 * Math.random()) * 1000,
  top = mouseY - negative,
  left = mouseX - negative,
  direction = Math.random() <= .5 ? -1 : 1,
  life = 10;

  particle.
  css({
    height: size + 'px',
    width: size + 'px',
    top: top + 'px',
    left: left + 'px',
    background: color,
    transform: 'rotate(' + spinVal + 'deg)',
    webkitTransform: 'rotate(' + spinVal + 'deg)' }).

  appendTo(particles);
  particleCount++;


  var particleTimer = setInterval(function () {
    time = time - life;
    left = left - speedHorz * direction;
    top = top - speedUp;
    speedUp = Math.min(size, speedUp - 1);
    spinVal = spinVal + spinSpeed;


    particle.
    css({
      height: size + 'px',
      width: size + 'px',
      top: top + 'px',
      left: left + 'px',
      opacity: time / otime / 2 + .25,
      transform: 'rotate(' + spinVal + 'deg)',
      webkitTransform: 'rotate(' + spinVal + 'deg)' });


    if (time <= 0 || left <= -size || left >= wWidth + size || top >= wHeight + size) {
      particle.remove();
      particleCount--;

      clearInterval(particleTimer);
    }
  }, 1000 / 60);
}

    </script>

</body>
</html>
